#summary Yarxi.PL - консольный интерфейс к словарю Яркси.

= О программе =

Yarxi.PL - это программа, которая "понимает" базу данных словаря [http://www.susi.ru/yarxi/ Яркси] и умеет выводить в текстовую консоль словарные статьи, максимально похоже на оригинал.

Оригинальный Яркси, разрабатываемый Вадимом Смоленским, - электронный японско-русский словарь иероглифов с оригинальной системой поиска по радикалам. Его сайт: [http://www.susi.ru/yarxi/]. Все благодарности за словарь - Вадиму Смоленскому.


= Ограничения =

Программа предназначена для работы в ОС *Linux*. Впрочем, так как программа написана на языке Perl, то её, скорее всего, можно будет модифицировать и для работы в других операционных системах. У меня даже получалось запускать её под Windows.

Программа расчитана на локаль *UTF-8*.

Работа в текстовом режиме накладывает множество ограничений на возможности программы. В частности, возможна работа только с теми знаками, которые поддерживаются текущей локалью и шрифтом. К примеру, в юникоде отсутствует часть радикалов, представленных в Яркси.

В текущей версии программы реализован только простейший поиск и показ статей. Отчасти слабость поиска заключается в том, что пока невозможно искать составные слова "как есть" или по частям. 

В версии 1.3 появился поиск по радикалам (опция -r). Алгоритм поиска отличается от оригинального Яркси. К примеру, иероглиф можно найти даже если указать "лишние" радикалы. Вместо радикалов можно указывать иероглифы, они будут разбиты на части для поиска. 

Также в версии 1.3 благодаря инициативе Антона Печенко aka Parilo появился минимальный графический интерфейс. Окно программы представляет из себя поле для ввода команды и область для вывода результата, работает идентично консольной версии.

Принимаются пожелания по дальнейшему улучшению программы, сообщения об ошибках, и любые другие комментарии. E-Mail: bigasoft@gmail.com, он же Jabber.

= Лицензия =

Программа распространяется бесплатно, с исходным кодом, открытым под лицензией GPLv2. Данные словаря Яркси используются с разрешения Вадима Смоленского.

= Установка и использование =

Распакуйте архив в любое место, где вам нравится. Например, в "~/.yarxi/". Возможно понадобится выставить права на исполнение для файла yarxi.pl: команда "chmod +x yarxi.pl".

Файлы в составе архива:

 * *yarxi.pl* - основной скрипт. Смотрите список опций по --help.
 * *JDFormatter.pm, JDCommon.pm, JDPrinter.pm, JD_AText.pm* - модули основного скрипта.
 * *JDPrinterGTK.pm, yarxi.gtk.pl* - минималистичный графический интерфейс (нужен gtk2-perl).
 * *config/yarxi.conf* - конфигурационный файл.
 * *config/`*`.scheme* - файлы цветовых схем.
 * *yarxi_u.db* - база данных, с которой работает программа. Отсутствует в облегченной версии архива.
 * *2db.pl* - скрипт для создания базы SQLite, с которой работает программа, из файлов словаря jr_kan.txt, jr_tan.txt, jr_ele.txt, jr_str.txt и файла jr_rad.utf8.
 * *jr_rad.utf8* - файл с таблицей соответствия кодов радикалов символам юникода.
 * *gpl-2.0.txt* - текст лицензии GPL.
 * *dbtool.pl* - скрипт для осуществления выборок из базы. Вспомогательное средство разработчика, хотя может кому-то оказаться полезным, особенно при использовании в тандеме с командой grep.

Для упрощения пользования советую создать alias на скрипт yarxi.pl. Например, для bash нужно прописать в файле *~/.bashrc* строку `alias yy='/path/to/script/yarxi.pl'`, после чего вы можете вызывать программу командой "yy". Например, "yy neko" (ищет слово по транскрипции) или "yy кошка" (ищет в переводах).

Есть и другие возможности. Чтобы получить описание опций, запустите yarxi.pl с ключом *--help*.

= Файл конфигурации =

Файл конфигурации *yarxi.conf* может располагаться либо в поддиректории *config* директории программы, либо в поддиректории *.yarxi* директории пользователя (*~/.yarxi/yarxi.conf*).

В файле настраиваются следующие параметры:

*cur_trans_type* - способ отображения транскрипции: кириллица, латиница (romaji), хирагана или катакана.

*scheme* - указывается файл со схемой (путь указывается относительно этого файла). Если у вас светлый шрифт на тёмном фоне, то выбирайте *dark.scheme* (по умолчанию). Если наоборот - тёмный шрифт на светлом фоне, то используйте *light.scheme*. Также есть одноцветная схема mono.scheme. Легко можно составить свою схему, только вам придётся угадывать, какой параметр за какой элемент статьи отвечает.

= Генерация базы =

Готовую базу можно взять в разделе Downloads.

Чтобы создать SQLite базу, с которой работает програма, вам понадобятся файлы jr_kan.txt, jr_tan.txt, jr_str.txt и jr_ele.txt, которые идут в составе оригинального Яркси.
Лучше всего скачать отдельную *полную* базу *YarxiFullDB.zip* с сайта Яркси.

Два файла - jr_kan.txt и jr_tan.txt - нужно преобразовать в кодировку utf8:
{{{
$> iconv -f cp1251 -t utf8 jr_kan.txt > jr_kan.utf8
$> iconv -f cp1251 -t utf8 jr_tan.txt > jr_tan.utf8
}}}

И запустить скрипт 2db.pl:
{{{
$> ./2db.pl --kan jr_kan.utf8 --tan jr_tan.utf8 --rad jr_rad.utf8 --str jr_str.txt --ele jr_ele.txt
}}}
Скрипт создаст файл yarxi_u.db за несколько секунд.
Файл yarxi_u.db нужно положить в ту же директорию, где находится yarxi.pl.

= Благодарности =

Автор благодарит *Вадима Смоленского* за замечательную программу Яркси и за сотрудничество при написании этой версии для Linux.

Также автор благодарит *Алексея Кожевникова*, чья программа [http://rathouse.ru/index.php?position=14 JARUDO] (а точнее её исходный код) вдохновили меня к созданию консольного интерфейса к словарю Яркси. 

Автор благодарен *Антону Печенко aka Parilo* за инициативу по созданию графического интерфейса.

*Спасибо!*