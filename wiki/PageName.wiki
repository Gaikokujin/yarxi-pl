#summary Yarxi.PL - консольный интерфейс к словарю Яркси.

= О программе =

Yarxi.PL - это программа, которая "понимает" базу данных словаря [http://www.susi.ru/yarxi/ Яркси] и умеет выводить в текстовую консоль словарные статьи, максимально похоже на оригинал.

Оригинальный Яркси, разрабатываемый Вадимом Смоленским, - электронный японско-русский словарь иероглифов с оригинальной системой поиска по радикалам. Его сайт: [http://www.susi.ru/yarxi/]. Все благодарности за словарь - Вадиму Смоленскому.


= Ограничения =

Программа предназначена для работы в *Linux*. Впрочем, так как программа написана на языке Perl, то её, скорее всего, можно будет модифицировать и для работы в других операционных системах. У меня вроде получалось запускать её под windows.

Программа расчитана на локаль *UTF-8*.

Работа в текстовом режиме накладывает множество ограничений на возможности программы. В частности, возможна работа только с теми знаками, которые поддерживаются текущей локалью и шрифтом. К примеру, в юникоде отсутствует большая часть радикалов, представленных в Яркси.

В текущей версии программы реализован только простейший поиск и показ статей. Отчасти слабость поиска заключается в том, что пока невозможно искать составные слова "как есть" или по частям. 

Принимаются пожелания по дальнейшему улучшению программы, сообщения об ошибках, и любые другие комментарии. Но вообще, проект уже давно не развивается, т.к. мои интересы переместились в другие области. Извините =/. Но вы всё равно пишите, а я буду исправлять потихонечку.

E-Mail: bigasoft@gmail.com, он же Jabber.

= Лицензия =

Программа распространяется бесплатно, с исходным кодом, открытым под лицензией GPLv2. Данные словаря Яркси используются с разрешения Вадима Смоленского.

= Установка и использование =

Распакуйте архив в любое место, где вам нравится. Например, в "~/.yarxi/".

Файлы в составе архива:

 * *2db.pl* - скрипт для создания базы SQLite, с которой работает программа, из файлов словаря 
 * *jr_kan.txt* и *jr_tan.txt*. Только их сначала надо *перевести в utf-8*.
 * *dbtool.pl* - скрипт для осуществления выборок из базы. Вспомогательное средство разработчика, хотя может кому-то оказаться полезным, особенно при использовании в тандеме с командой grep.
 * *yarxi_u.db* - база данных, с которой работает программа. Поставляется в отдельном архиве.
 * *yarxi.pl* - основной скрипт. У него есть ключ --help, если что.
 * *JDFormatter.pm, JDCommon.pm, JDPrinter.pm, JD_AText.pm* - модули основного скрипта.
 * *yarxi.conf* - конфигурационный файл.
 * `*`.scheme - файлы цветовых схем.
 * *gpl-2.0.txt* - текст лицензии GPL.

Для упрощения пользования советую создать alias на скрипт yarxi.pl. Например, для bash нужно прописать в файле *~/.bashrc* строку `alias yy='/path/to/script/yarxi.pl'`, после чего вы можете вызывать программу командой "yy". Например, "yy neko" (ищет слово по транскрипции) или "yy кошка" (ищет в переводах).

Также можно искать составные слова, но при этом игнорируется порядок иероглифов и кана.

Есть и другие возможности. Чтобы получить описание опций, запустите yarxi.pl с ключом *--help*.

= Файл конфигурации =

Файл конфигурации *yarxi.conf* может располагаться либо в директории программы, либо в поддиректории .yarxi директории пользователя (*~/.yarxi/yarxi.conf*).

В файле настраиваются следующие параметры:

*cur_trans_kind* - способ отображения транскрипции: кириллица, латиница (romaji), хирагана или катакана.

*scheme* - указывается файл со схемой (путь указывается относительно этого файла). Если у вас светлый шрифт на тёмном фоне, то выбирайте *dark.scheme* (по умолчанию). Если наоборот - тёмный шрифт на светлом фоне, то используйте *light.scheme*. Также есть одноцветная схема mono.scheme. Легко можно составить свою схему, только вам придётся угадывать, какой параметр за какой элемент статьи отвечает.

= Генерация базы =

*Внимание!* Все скрипты расчитаны *на старый формат базы*. Формат постоянно меняется, и с последней версией словаря у вас вряд ли что-то вообще получится. Пинайте меня сильнее, чтобы я таки взялся за апдейт кода!

Чтобы создать SQLite базу, с которой работает програма, из файлов jr_kan.txt и jr_tan.txt (которые идут в составе Яркси) нужно:

Преобразовать файлы в кодировку utf8:
{{{
$> iconv -f cp1251 -t utf8 jr_kan.txt > jr_kan.utf8
$> iconv -f cp1251 -t utf8 jr_tan.txt > jr_tan.utf8
}}}

Запустить скрипт 2db.pl:
{{{
$> ./2db.pl jr_kan.utf8 jr_tan.utf8
}}}
- первым параметром передаётся файл jr_kan.utf8 с путём, вторым - jr_tan.utf8.
Скрипт неспешно создаст файл yarxi_u.db, на это понадобится около 10 минут. Файл yarxi_u.db положите в одну директорию с yarxi.pl. 

= Благодарности =

Автор благодарит *Вадима Смоленского* за замечательную программу Яркси и за сотрудничество при написании этой версии для Linux.

Также автор благодарит *Алексея Кожевникова*, чья программа [http://rathouse.ru/index.php?position=14 JARUDO] (а точнее её исходный код) вдохновили меня к созданию консольного интерфейса к словарю Яркси. 

*Спасибо!*